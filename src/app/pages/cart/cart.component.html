<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito de compras</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous" />
</head>
<body>
  <!-- Encabezado de la página con un logo y una barra de navegación -->
  <navbar></navbar>

  <!-- Creamos el Cuerpo de la página-->
  <main>	
    <!-- Contenido principal -->
    <div *ngIf="productos.length > 0; else emptyCart">
      <h1>Carrito de Compras</h1>
      <ul>
        <li *ngFor="let producto of productos">
          <img [src]="producto.imagen" [alt]="producto.nombre" />
          <span>{{ producto.nombre }}</span>
          <button (click)="eliminarProducto(producto)">Eliminar</button>
        </li>
      </ul>
      <button (click)="eliminarTodosLosProductos()">Eliminar todos los productos</button>
      <button (click)="realizarPedido()">Realizar Pedido</button>
    </div>

    <ng-template #emptyCart>
      <!--<p>No hay productos en el carrito.</p>--> 
    </ng-template>

    <section class="h-100">
      <div class="container h-100 py-5">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-10">

            <div class="d-flex justify-content-between align-items-center mb-4">
              <h3 class="fw-normal mb-0 text-black"><strong>Carrito de compra</strong></h3>  
              <button (click)="this.onClickEmptyCart()" type="button" class="btn  btn-block btn-lg">Vaciar carrito</button>
            </div>  
            <hr>
            <div class=" container-articles">
              <div class="card rounded-3 mb-4" *ngFor="let article of this.cart; let i = index">
                <div class="card-body p-4">
                  <div class="row d-flex justify-content-between align-items-center">
                    <div (click)="this.onClickProduct(article)" class="col-md-2 col-lg-2 col-xl-2">
                      <img
                        src="{{article.image}}"
                        class="img-fluid rounded-3" alt="Cotton T-shirt">
                    </div>
                    <div (click)="this.onClickProduct(article)" class="col-md-3 col-lg-3 col-xl-3">
                      <p class="lead fw-normal mb-2"><strong>{{article.name}}</strong></p>
                    </div>
                    <div (click)="this.onClickProduct(article)" class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">
                      <h5 class="mb-0">{{article.price}}€</h5>
                    </div>
                    <div class="col-md-1 col-lg-1 col-xl-1 text-end">
                      <a (click)="this.onClickDeleteArticle(i, article.price)" href="javascript:void(0)" class="text-danger">
                        <i class="fas fa-trash fa-lg trash"></i>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <hr>  
            <div class="d-flex justify-content-between align-items-center mb-4">
              <div class="card-body">
                <button (click)="this.onClickFinalisePurchase()" type="button" class="btn btn-block btn-lg">Finalizar compra</button>
              </div>
              <h4>Total: {{totalPrice}}€</h4>
            </div>

          </div>
        </div>
      </div>
    </section>    
  </main>
  <miFooter></miFooter>
</body>